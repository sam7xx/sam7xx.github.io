utils.jq(()=>{$(function(){for(var e=document.getElementsByClassName("ds-waline"),a=0;a<e.length;a++){let n=e[a];var r=parseInt(n.getAttribute("limit"))||10,s=n.dataset.api;if(null!=s){let t=def.avatar;utils.request(n,s+"/comment?type=recent&count="+r,async e=>{(await e.json()).forEach((e,a)=>{a=(a=(a=(a=(a=(a='<div class="timenode" index="'+a+'"><div class="header"><div class="user-info">')+'<img src="'+(e.avatar||t)+'" onerror="javascript:this.src=\''+t+"';\">")+"<span>"+e.nick+"</span></div>")+"<span>"+new Date(e.time).toLocaleString()+"</span>")+'</div><a class="body" href="'+e.url+"#"+e.objectId+'" target="_blank" rel="external nofollow noopener noreferrer">')+e.comment.replace(/<a\b[^>]*>(.*?)<\/a>/g,"$1")+"</a></div>";$(n).append(a)})})}}})});