.wl-panel {
  background: var(--waline-bgcolor) !important;
}

.cmt-body {
  .wl-panel {
    margin: 0.5em 0 !important;
  }
  
  .wl-meta-head {
    padding: 0 !important;
  }
  
  --waline-font-size: 0.9375rem;
  
  /* 浅色模式 - 增强工具栏对比度 */
  --waline-white: #ffffff;
  --waline-light-grey: #2c0e0eff; /* 加深浅灰色，提升文字可读性 */
  --waline-dark-grey: #333333; /* 加深深灰色，增强与背景对比 */
  
  /* 主题色强化 - 使工具栏按钮更突出 */
  --waline-theme-color: #1859bbff; /* 稍深的主题色，增强按钮识别度 */
  --waline-active-color: #5d932b; /* 更鲜明的活跃色，突出点击状态 */
  
  /* 布局颜色 - 增强工具栏区域区分 */
  --waline-color: #188dd1ff;
  --waline-bgcolor: #ffffff;
  --waline-bgcolor-light: #f5f5f5; /* 稍深的浅色背景，使工具栏区域更明显 */
  --waline-bgcolor-hover: #e0e0e0; /* 加深悬停背景，提升交互反馈 */
  --waline-border-color: #cccccc; /* 稍深的边框，使工具栏元素边界更清晰 */
  --waline-disable-bgcolor: #f0f0f0;
  --waline-disable-color: #888888; /* 禁用状态颜色加深，明确不可用状态 */
  --waline-code-bgcolor: #adaaaaff; /* 代码工具栏背景调整 */
  
  /* 特殊颜色 */
  --waline-bq-color: #f0f0f0;
  
  /* 头像 */
  --waline-avatar-size: 3.25rem;
  --waline-m-avatar-size: calc(var(--waline-avatar-size) * 9 / 13);
  
  /* 徽章 - 增强工具栏内徽章对比度 */
  --waline-badge-color: #2980b9; /* 稍深的徽章色，更易识别 */
  --waline-badge-font-size: 0.725em;
  
  /* 信息区域 - 工具栏辅助信息更清晰 */
  --waline-info-bgcolor: #f5f5f5;
  --waline-info-color: #555555; /* 信息文字加深 */
  --waline-info-font-size: 0.725em;
  
  /* 渲染选择 - 强化工具栏元素边框 */
  --waline-border: 1px solid var(--waline-border-color);
  --waline-avatar-radius: 50%;
  --waline-box-shadow: 0 1px 4px rgba(0,0,0,0.15); /* 稍强阴影，突出工具栏区域 */
  
  /* 工具栏特定元素强化 */
  .wl-toolbar {
    border-bottom: 1px solid #e0e0e0; /* 工具栏底部边框加深 */
    padding: 0.5em 0;
    background-color: #fafafa; /* 工具栏背景与主区域区分 */
  }
  
  /* 工具栏按钮增强 */
  .wl-toolbar button {
    color: #555555 !important; /* 按钮图标颜色加深 */
    padding: 0.3em 0.6em;
  }
  
  .wl-toolbar button:hover {
    background-color: #e8e8e8 !important; /* 悬停背景更明显 */
    color: #222222 !important; /* 悬停时图标颜色加深 */
  }
  
  /* 输入框强化 */
  .wl-editor {
    border: 1px solid #dddddd !important;
    box-shadow: inset 0 1px 3px rgba(0,0,0,0.05) !important; /* 内阴影增强输入框边界感 */
  }
}

.cmt-body.waline {
  ondark() {
    /* 深色模式增强对比度设置 */
    --waline-white: #0a0a0a;
    --waline-light-grey: #b0b0b0; /* 明显提亮的浅灰色 */
    --waline-dark-grey: #e0e0e0; /* 接近白色的深灰色，提升文字可读性 */
    
    /* 布局颜色 - 更大的明暗差异 */
    --waline-color: #f0f0f0; /* 极亮的文字颜色 */
    --waline-bgcolor: var(--block, #121212); /* 更深的主背景 */
    --waline-bgcolor-light: #222222; /* 明显浅于主背景的次级背景 */
    --waline-bgcolor-hover: #2C3E50; /* 悬停状态明显区分 */
    --waline-border-color: #383838; /* 更粗的视觉边框效果 */
    --waline-disable-bgcolor: #333333;
    --waline-disable-color: #999999; /* 禁用状态与可用状态明显区分 */
    --waline-code-bgcolor: #050810; /* 代码块背景与主背景区分 */
    
    /* 特殊颜色 - 增强区块感 */
    --waline-bq-color: #252525; /* 引用区块明显区分 */
    
    /* 主题色 - 在深色背景上更突出 */
    --waline-theme-color: #2983beff;
    --waline-active-color: #7dd147; /* 更鲜艳的活跃色 */
    --waline-badge-color: #4da6ff; /* 徽章颜色更明亮 */
    
    /* 信息区域 - 增强区分度 */
    --waline-info-bgcolor: #222222;
    --waline-info-color: #cccccc; /* 信息文字更亮 */
    
    /* 强化边框和阴影效果 */
    --waline-border: 1px solid var(--waline-border-color);
    --waline-box-shadow: 0 2px 8px rgba(0,0,0,0.3); /* 更深的阴影增强层次感 */
    
    /* 计数元素特别强化 */
    .wl-count {
      padding: .375em;
      font-weight: bold;
      font-size: 1.25em;
      color: #ffffff;
      background-color: #050810;
      border-radius: 4px;
    }
    
    /* 评论项之间添加分隔线增强区分 */
    .wl-item {
      border-bottom: 1px solid var(--waline-border-color);
      padding: 1em 0;
    }
    
    /* 输入框强化 */
    .wl-editor {
      background-color: #050810 !important;
      border: 1px solid #383838 !important;
      color: #f0f0f0 !important;
    }
  }
  
  :root[data-theme="dark"] & {
    ondark();
  }
  
  :root:not([data-theme]) & {
    @media (prefers-color-scheme: dark) {
      ondark();
    }
  }
}

/* 修复浅色模式下评论标题显示白色的问题 */
/* 1. 基础覆盖：直接指定 .cmt-title 文本颜色 */
.header.cmt-title {
  color: #333333 !important; /* 浅色模式默认深色文本，与白色背景强对比 */
}

/* 2. 精准适配：结合 data-theme="light" 确保只作用于浅色模式 */
:root[data-theme="light"] .header.cmt-title {
  color: #222222 !important; /* 浅色模式下强制深色标题 */
  opacity: 1 !important; /* 避免被其他样式设置透明 */
}

/* 3. 兜底：防止标题内的 p 标签继承白色 */
:root[data-theme="light"] .header.cmt-title p {
  color: inherit !important; /* 继承父级的深色，而非白色 */
  margin: 0; /* 可选：修复可能的默认边距问题 */
}

/* 4. 深色模式兼容（避免影响深色模式） */
:root[data-theme="dark"] .header.cmt-title {
  color: #ffffff !important; /* 深色模式保持白色标题，确保正常显示 */
}